{% extends "base.html" %}
{% block content %}
<section class="card center wide">
  <h1>Admin</h1>
  <form method="POST">
    <fieldset class="section">
      <legend>Admin Auth</legend>
      <label>Admin Passcode <input name="passcode" type="password" placeholder="required"></label>
    </fieldset>

    <fieldset class="section">
      <legend>Branding</legend>
      <label>Service Name <input name="service_name" value="{{ cfg.branding.service_name }}"></label>
      <label>Site Name <input name="site_name" value="{{ cfg.branding.site_name }}"></label>
      <label>From Display <input name="from_display" value="{{ cfg.branding.from_display }}"></label>
      <label>Fixed Recipients (one per line)
        <textarea name="fixed_recipients" rows="4">{% for r in cfg.branding.fixed_recipients %}{{ r }}
{% endfor %}</textarea>
      </label>
    </fieldset>

    <fieldset class="section">
      <legend>Asterisk / FreePBX</legend>
      <div class="grid2">
        <label>AMI Host <input name="ami_host" value="{{ cfg.asterisk.ami_host }}"></label>
        <label>AMI Port <input name="ami_port" value="{{ cfg.asterisk.ami_port }}"></label>
        <label>AMI Username <input name="ami_username" value="{{ cfg.asterisk.ami_username }}"></label>
        <label>AMI Secret <input name="ami_secret" value="{{ cfg.asterisk.ami_secret }}"></label>
        <label>Page Ext <input name="page_extension" value="{{ cfg.asterisk.page_extension }}"></label>
      </div>
    </fieldset>

    <fieldset class="section">
      <legend>Cisco Phones</legend>
      <label class="check">
        <input type="checkbox" name="cisco_enabled" {% if cfg.cisco.enabled %}checked{% endif %}>
        Enabled
      </label>
      <div class="grid2">
        <label>Username <input name="cisco_username" value="{{ cfg.cisco.username or 'admin' }}"></label>
        <label>Password <input name="cisco_password" value="{{ cfg.cisco.password or 'admin' }}"></label>
      </div>
      <label>Phones (one IP per line)
        <textarea name="cisco_phones" rows="5">{% for ip in cfg.cisco.phones %}{{ ip }}
{% endfor %}</textarea>
      </label>
    </fieldset>

    <fieldset class="section">
      <legend>ClockWise / ANETD</legend>
      <div class="grid2">
        <label><input type="checkbox" name="clockwise_enabled" {% if cfg.clockwise.enabled %}checked{% endif %}> Enabled</label>
        <label>ClockWise IP <input name="clockwise_ip" value="{{ cfg.clockwise.ip }}"></label>
        <label>UDP Port <input name="clockwise_port" value="{{ cfg.clockwise.port }}"></label>
      </div>
      <label>Per-action trigger text (what gets sent over UDP)</label>
      <div class="grid2">
        {% for key, val in cfg.clockwise.triggers.items() %}
          <label>{{ key }} text <input name="clockwise_{{ key }}" value="{{ val }}"></label>
        {% endfor %}
      </div>
      <p class="hint">Leave fields blank to fall back to the action name itself.</p>
    </fieldset>


    <div class="actions">
      <button class="btn primary" type="submit">Save</button>
    </div>
  </form>
</section>
{% endblock %}
